(this["webpackJsonp@login-with-metamask/frontend"]=this["webpackJsonp@login-with-metamask/frontend"]||[]).push([[0],{116:function(e,t,n){},119:function(e,t){},124:function(e,t){},126:function(e,t){},136:function(e,t){},138:function(e,t){},164:function(e,t){},165:function(e,t){},170:function(e,t){},172:function(e,t){},179:function(e,t){},198:function(e,t){},219:function(e,t,n){},220:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);n(116);var c,a=n(113),s=n(9),r=n(114),i=n.n(r),o=n(23),u=(n(219),n(29)),d=n(58),l=(n(220),n(115)),b=n.n(l),j=n(0),O=function(e){var t=e.onLoggedIn,n=Object(s.useState)(!1),a=Object(o.a)(n,2),r=a[0],i=a[1],l=function(e){var t=e.publicAddress,n=e.signature;return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL,"/auth"),{body:JSON.stringify({publicAddress:t,signature:n}),headers:{"Content-Type":"application/json"},method:"POST"}).then((function(e){return e.json()}))},O=function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,a,s;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.publicAddress,a=t.nonce,e.prev=1,e.next=4,c.eth.personal.sign("I am signing my one-time nonce: ".concat(a),n,"");case 4:return s=e.sent,e.abrupt("return",{publicAddress:n,signature:s});case 8:throw e.prev=8,e.t0=e.catch(1),new Error("You need to sign the message to be able to log in.");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL,"/users"),{body:JSON.stringify({publicAddress:e}),headers:{"Content-Type":"application/json"},method:"POST"}).then((function(e){return e.json()}))},f=function(){var e=Object(d.a)(Object(u.a)().mark((function e(){var n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=3;break}return window.alert("Please install MetaMask first."),e.abrupt("return");case 3:if(c){e.next=14;break}return e.prev=4,e.next=7,window.ethereum.enable();case 7:c=new b.a(window.ethereum),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),window.alert("You need to allow MetaMask."),e.abrupt("return");case 14:return e.next=16,c.eth.getCoinbase();case 16:if(n=e.sent){e.next=20;break}return window.alert("Please activate MetaMask first."),e.abrupt("return");case 20:a=n.toLowerCase(),i(!0),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL,"/users?publicAddress=").concat(a)).then((function(e){return e.json()})).then((function(e){return e.length?e[0]:h(a)})).then(O).then(l).then(t).catch((function(e){window.alert(e),i(!1)}));case 23:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"all",children:[Object(j.jsxs)("button",{className:"Login-button Login-mm",onClick:f,children:[Object(j.jsx)("img",{src:"./logoz.svg",className:"fox",alt:""})," ",r?"LOADING..":"CONNECT"]}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("h1",{children:"TRADE AI"}),Object(j.jsx)("p",{children:"Experience the best of what we offer."})]}),Object(j.jsxs)("section",{className:"about-us",children:[Object(j.jsx)("h2",{children:"About Us"}),Object(j.jsx)("p",{children:"We are a dedicated team of professionals, committed to providing the best services. With years of experience in our domain, we ensure quality, integrity, and excellence in everything we do. Join us on this journey and discover the difference."})]})]})]})},h=n(10),f=(n(222),n(59)),p=function(e){var t=e.auth,n=e.onLoggedOut,c=Object(s.useState)({loading:!1,user:void 0,username:""}),a=Object(o.a)(c,2),r=a[0],i=a[1],u=1e3,d=150;Object(s.useEffect)((function(){var e=t.accessToken,n=Object(f.a)(e).payload.id;fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL,"/users/").concat(n),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return i((function(t){return Object(h.a)(Object(h.a)({},t),{},{user:e})}))})).catch(window.alert)}),[t]);var l=t.accessToken,b=Object(f.a)(l).payload.publicAddress,O=r.loading,p=r.user,m=p&&p.username;return Object(j.jsxs)("div",{className:"Profile",children:[Object(j.jsx)("div",{className:"bg"}),Object(j.jsx)("div",{className:"bg bg2"}),Object(j.jsx)("div",{className:"bg bg3"}),Object(j.jsx)("div",{className:"title",children:"A.I DASHBOARD"}),Object(j.jsxs)("div",{className:"dashboard",children:[Object(j.jsx)("pre",{className:"dashboarda",children:b}),Object(j.jsxs)("div",{className:"parameter",children:[Object(j.jsx)("label",{children:"Username"}),Object(j.jsxs)("span",{className:"huhu",children:[m?Object(j.jsx)("pre",{children:m}):""," "]})]}),Object(j.jsxs)("div",{className:"parameter",children:[Object(j.jsx)("label",{children:"Deposit:"}),Object(j.jsxs)("span",{children:["$",u]})]}),Object(j.jsxs)("div",{className:"parameter",children:[Object(j.jsx)("label",{children:"Earnings:"}),Object(j.jsxs)("span",{children:["$",d]})]})]}),Object(j.jsxs)("div",{className:"actions",children:[Object(j.jsx)("button",{className:"action-button",children:"Emergency Withdraw"}),Object(j.jsx)("button",{className:"action-button",children:"Deposit Crypto"}),Object(j.jsx)("button",{className:"action-button",children:"Withdraw Earnings"})]}),Object(j.jsxs)("div",{className:"guda",children:[Object(j.jsx)("label",{htmlFor:"username",children:"Change username: "}),Object(j.jsx)("input",{name:"username",onChange:function(e){var t=e.target.value;i(Object(h.a)(Object(h.a)({},r),{},{username:t}))}}),Object(j.jsx)("button",{disabled:O,onClick:function(){var e=t.accessToken,n=r.user,c=r.username;i(Object(h.a)(Object(h.a)({},r),{},{loading:!0})),n?fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL,"/users/").concat(n.id),{body:JSON.stringify({username:c}),headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},method:"PATCH"}).then((function(e){return e.json()})).then((function(e){return i(Object(h.a)(Object(h.a)({},r),{},{loading:!1,user:e}))})).catch((function(e){window.alert(e),i(Object(h.a)(Object(h.a)({},r),{},{loading:!1}))})):window.alert("The user id has not been fetched yet. Please try again in 5 seconds.")},children:"Submit"})]}),Object(j.jsx)("p",{children:Object(j.jsx)("button",{className:"makwekwe action-button",onClick:n,children:"Logout"})})]})},m="login-with-metamask:auth",v=function(){var e=Object(s.useState)({}),t=Object(o.a)(e,2),n=t[0],c=t[1];Object(s.useEffect)((function(){var e=window.localStorage.getItem(m),t=e&&JSON.parse(e);c({auth:t})}),[]);var a=n.auth;return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App-header"}),Object(j.jsx)("div",{className:"App-intro",children:a?Object(j.jsx)(p,{auth:a,onLoggedOut:function(){localStorage.removeItem(m),c({auth:void 0})}}):Object(j.jsx)(O,{onLoggedIn:function(e){localStorage.setItem(m,JSON.stringify(e)),c({auth:e})}})})]})};Object(a.config)({path:".env.production"}),i.a.render(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[223,1,2]]]);
//# sourceMappingURL=main.a0be909c.chunk.js.map